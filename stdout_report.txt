(venv) PS D:\Web3Projects\devPipline> # 1. DÃ©sinstaller le plugin problÃ©matique
>> npm uninstall @nomicfoundation/hardhat-verify
>> Write-Host "ðŸ”§ hardhat-verify dÃ©sinstallÃ© (incompatible ESM)" -ForegroundColor Yellow
>>
>> # 2. Configuration sans hardhat-verify (pour l'instant)
>> @'
>> import "@nomicfoundation/hardhat-ethers";
>> import * as dotenv from "dotenv";
>>
>> dotenv.config();
>>
>> const config = {
>>   solidity: "0.8.20",
>>   networks: {
>>     hardhat: {
>>       type: "edr-simulated"
>>     }
>>   }
>> };
>>
>> export default config;
>> '@ | Set-Content -Path "hardhat.config.js" -Encoding UTF8
>>
>> Write-Host "âœ… Configuration simplifiÃ©e (sans verify)" -ForegroundColor Green
npm warn ERESOLVE overriding peer dependency
npm warn While resolving: @nomicfoundation/hardhat-verify@2.1.3
npm warn Found: hardhat@3.1.3
npm warn node_modules/hardhat
npm warn   peer hardhat@"^3.0.7" from @nomicfoundation/hardhat-ethers@4.0.4
npm warn   node_modules/@nomicfoundation/hardhat-ethers
npm warn     dev @nomicfoundation/hardhat-ethers@"^4.0.0" from the root project
npm warn   1 more (the root project)
npm warn
npm warn Could not resolve dependency:
npm warn peer hardhat@"^2.26.0" from @nomicfoundation/hardhat-verify@2.1.3
npm warn node_modules/@nomicfoundation/hardhat-verify
npm warn
npm warn Conflicting peer dependency: hardhat@2.28.3
npm warn node_modules/hardhat
npm warn   peer hardhat@"^2.26.0" from @nomicfoundation/hardhat-verify@2.1.3
npm warn   node_modules/@nomicfoundation/hardhat-verify

removed 51 packages, and audited 72 packages in 2s

20 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
ðŸ”§ hardhat-verify dÃ©sinstallÃ© (incompatible ESM)
âœ… Configuration simplifiÃ©e (sans verify)
(venv) PS D:\Web3Projects\devPipline> # CrÃ©er un contrat SimpleNFT CORRIGÃ‰
>> @'
>> // SPDX-License-Identifier: MIT
>> pragma solidity 0.8.20;
>>
>> import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
>> import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
>> import "@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";
>> import "@openzeppelin/contracts/access/Ownable.sol";
>> import "@openzeppelin/contracts/utils/Counters.sol";
>>
>> contract SimpleNFT is ERC721, ERC721Enumerable, ERC721URIStorage, Ownable {
>>     using Counters for Counters.Counter;
>>
>>     Counters.Counter private _tokenIdCounter;
>>     string private _baseTokenURI;
>>     uint256 public constant MAX_SUPPLY = 10000;
>>     uint256 public mintPrice = 0.01 ether;
>>
>>     event NFTMinted(address indexed to, uint256 indexed tokenId, string tokenURI);
>>     event NFTBurned(address indexed owner, uint256 indexed tokenId);
>>     event BaseURIUpdated(string newBaseURI);
>>
>>     constructor(
>>         string memory name,
>>         string memory symbol,
>>         string memory baseURI
>>     ) ERC721(name, symbol) Ownable(msg.sender) {
>>         _baseTokenURI = baseURI;
>>     }
>>
>>     function safeMint(address to, string memory tokenURI)
>>         public
>>         payable
>>         returns (uint256)
>>     {
>>         require(msg.value >= mintPrice, "Insufficient payment");
>>         require(totalSupply() < MAX_SUPPLY, "Max supply reached");
>>
>>         uint256 tokenId = _tokenIdCounter.current();
>>         _tokenIdCounter.increment();
>>
>>         _safeMint(to, tokenId);
>>         _setTokenURI(tokenId, tokenURI);
>>
>>         if (msg.value > mintPrice) {
>>             payable(msg.sender).transfer(msg.value - mintPrice);
>>         }
>>
>>         emit NFTMinted(to, tokenId, tokenURI);
>>         return tokenId;
>>     }
>>
>>     function ownerMint(address to, string memory tokenURI)
>>         public
>>         onlyOwner
>>         returns (uint256)
>>     {
>>         require(totalSupply() < MAX_SUPPLY, "Max supply reached");
>>
>>         uint256 tokenId = _tokenIdCounter.current();
>>         _tokenIdCounter.increment();
>>
>>         _safeMint(to, tokenId);
>>         _setTokenURI(tokenId, tokenURI);
>>
>>         emit NFTMinted(to, tokenId, tokenURI);
>>         return tokenId;
>>     }
>>
>>     function burn(uint256 tokenId) public {
>>         require(_isApprovedOrOwner(_msgSender(), tokenId), "Not owner nor approved");
>>         _burn(tokenId);
>>         emit NFTBurned(msg.sender, tokenId);
>>     }
>>
>>     function setMintPrice(uint256 newPrice) public onlyOwner {
>>         mintPrice = newPrice;
>>     }
>>
>>     function setBaseURI(string memory newBaseURI) public onlyOwner {
>>         _baseTokenURI = newBaseURI;
>>         emit BaseURIUpdated(newBaseURI);
>>     }
>>
>>     function withdraw() public onlyOwner {
>>         uint256 balance = address(this).balance;
>>         require(balance > 0, "No balance to withdraw");
>>         payable(owner()).transfer(balance);
>>     }
>>
>>     // ==== Overrides nÃ©cessaires ====
>>
>>     function _baseURI() internal view override returns (string memory) {
>>         return _baseTokenURI;
>>     }
>>
>>     function _beforeTokenTransfer(address from, address to, uint256 tokenId, uint256 batchSize)
>>         internal
>>         override(ERC721, ERC721Enumerable)
>>     {
>>         super._beforeTokenTransfer(from, to, tokenId, batchSize);
>>     }
>>
>>     function _burn(uint256 tokenId) internal override(ERC721, ERC721URIStorage) {
>>         super._burn(tokenId);
>>     }
>>
>>     function tokenURI(uint256 tokenId)
>>         public
>>         view
>>         override(ERC721, ERC721URIStorage)
>>         returns (string memory)
>>     {
>>         return super.tokenURI(tokenId);
>>     }
>>
>>     function supportsInterface(bytes4 interfaceId)
>>         public
>>         view
>>         override(ERC721, ERC721Enumerable, ERC721URIStorage)
>>         returns (bool)
>>     {
>>         return super.supportsInterface(interfaceId);
>>     }
>>
>>     // ==== Getters ====
>>
>>     function nextTokenId() public view returns (uint256) {
>>         return _tokenIdCounter.current();
>>     }
>>
>>     function getBaseURI() public view returns (string memory) {
>>         return _baseTokenURI;
>>     }
>>
>>     function totalMinted() public view returns (uint256) {
>>         return _tokenIdCounter.current();
>>     }
>> }
>> '@ | Set-Content -Path "contracts\SimpleNFT.sol" -Encoding UTF8
>>
>> Write-Host "âœ… Contrat SimpleNFT corrigÃ© pour OpenZeppelin v4.9.5" -ForegroundColor Green
âœ… Contrat SimpleNFT corrigÃ© pour OpenZeppelin v4.9.5
(venv) PS D:\Web3Projects\devPipline> # Correction TOUT-EN-UN
>> Write-Host "ðŸš€ CORRECTION FINALE DU PROJET" -ForegroundColor Cyan
>> Write-Host "=================================" -ForegroundColor Cyan
>>
>> # 1. VÃ©rifier Node.js
>> Write-Host "`n1. ðŸ” VÃ©rification Node.js..." -ForegroundColor Gray
>> node --version
>>
>> # 2. Nettoyer et rÃ©installer
>> Write-Host "`n2. ðŸ§¹ Nettoyage..."  -ForegroundColor Yellow
>> Remove-Item -Path "node_modules", "package-lock.json" -Recurse -Force -ErrorAction SilentlyContinue
>>
>> # 3. package.json optimal
>> Write-Host "`n3. âš™ï¸  Configuration optimale..." -ForegroundColor Yellow
>> @'
>> {
>>   "name": "nftmarketplace",
>>   "version": "1.0.0",
>>   "type": "module",
>>   "scripts": {
>>     "compile": "hardhat compile",
>>     "test": "hardhat test",
>>     "node": "hardhat node",
>>     "deploy": "hardhat run scripts/deploy.js"
>>   },
>>   "devDependencies": {
>>     "hardhat": "^3.0.0",
>>     "@nomicfoundation/hardhat-ethers": "^4.0.0",
>>     "dotenv": "^16.0.0",
>>     "ethers": "^6.0.0"
>>   },
>>   "dependencies": {
>>     "@openzeppelin/contracts": "^4.9.5"
>>   }
>> }
>> '@ | Set-Content -Path "package.json" -Encoding UTF8
>>
>> # 4. Installer
>> Write-Host "`n4. ðŸ“¦ Installation..." -ForegroundColor Yellow
>> npm install --legacy-peer-deps
>>
>> # 5. Configuration Hardhat simple
>> Write-Host "`n5. ðŸ”§ Configuration Hardhat..." -ForegroundColor Yellow
>> @'
>> import "@nomicfoundation/hardhat-ethers";
>> import * as dotenv from "dotenv";
>>
>> dotenv.config();
>>
>> const config = {
>>   solidity: "0.8.20",
>>   networks: {
>>     hardhat: {
>>       type: "edr-simulated"
>>     }
>>   }
>> };
>>
>> export default config;
>> '@ | Set-Content -Path "hardhat.config.js" -Encoding UTF8
>>
>> # 6. TEST FINAL
>> Write-Host "`n6. ðŸ§ª TEST FINAL..."  -ForegroundColor Cyan
>> npx hardhat compile
>>
>> if ($LASTEXITCODE -eq 0) {
>>     Write-Host "`nðŸŽ‰ ðŸŽ‰ ðŸŽ‰ SUCCÃˆS TOTAL !" -ForegroundColor Green
>>     Write-Host "VOTRE PROJET COMPILE PARFAITEMENT" -ForegroundColor Cyan
>>
>>     Write-Host "`nðŸ“‹ Configuration validÃ©e :" -ForegroundColor White
>>     Write-Host "â€¢ Node.js: $(node --version) âœ…" -ForegroundColor Gray
>>     Write-Host "â€¢ Hardhat: v3.1.3 âœ…" -ForegroundColor Gray
>>     Write-Host "â€¢ OpenZeppelin: v4.9.5 âœ…" -ForegroundColor Gray
>>     Write-Host "â€¢ Contrat SimpleNFT: âœ…" -ForegroundColor Gray
>>
>>     # Configuration finale
>>     Write-Host "`nâš™ï¸  Configuration finale..." -ForegroundColor Yellow
>>     @'
>> import "@nomicfoundation/hardhat-ethers";
>> import * as dotenv from "dotenv";
>>
>> dotenv.config();
>>
>> const config = {
>>   solidity: {
>>     version: "0.8.20",
>>     settings: {
>>       optimizer: {
>>         enabled: true,
>>         runs: 200
>>       }
>>     }
>>   },
>>   networks: {
>>     hardhat: {
>>       type: "edr-simulated",
>>       chainId: 31337
>>     },
>>     localhost: {
>>       url: "http://127.0.0.1:8545",
>>       type: "http"
>>     }
>>   }
>> };
>>
>> export default config;
>> '@ | Set-Content -Path "hardhat.config.js" -Encoding UTF8
>>
>>     # CrÃ©er un script de dÃ©ploiement
>>     Write-Host "`nðŸ“œ CrÃ©ation script de dÃ©ploiement..." -ForegroundColor Cyan
>>     @'
>> import hre from "hardhat";
>>
>> async function main() {
>>   console.log("ðŸš€ DÃ©ploiement SimpleNFT...");
>>
>>   const SimpleNFT = await hre.ethers.getContractFactory("SimpleNFT");
>>   const nft = await SimpleNFT.deploy(
>>     "Simple NFT",
>>     "SNFT",
>>     "https://api.nftmarketplace.com/metadata/"
>>   );
>>
>>   await nft.waitForDeployment();
>>   const address = await nft.getAddress();
>>
>>   console.log(`âœ… Contrat dÃ©ployÃ© Ã : ${address}`);
>>   console.log(`ðŸ“ Name: ${await nft.name()}`);
>>   console.log(`ðŸŽ¯ Symbol: ${await nft.symbol()}`);
>>   console.log(`ðŸ”— Base URI: ${await nft.getBaseURI()}`);
>>   console.log(`ðŸŽ« Next Token ID: ${await nft.nextTokenId()}`);
>>
>>   return address;
>> }
>>
>> main().catch((error) => {
>>   console.error("ðŸ’¥ Erreur:", error);
>>   process.exitCode = 1;
>> });
>> '@ | Set-Content -Path "scripts/deploy.js" -Encoding UTF8
>>
>>     # Tester le dÃ©ploiement
>>     Write-Host "`nðŸ”— Test dÃ©ploiement local..." -ForegroundColor Yellow
>>     npx hardhat node --network hardhat &
>>     $nodePid = $!
>>     Start-Sleep -Seconds 5
>>
>>     npx hardhat run scripts/deploy.js --network localhost
>>
>>     Stop-Process -Id $nodePid -Force -ErrorAction SilentlyContinue
>>
>>     # Instructions finales
>>     Write-Host "`n" + ("="*70) -ForegroundColor Green
>>     Write-Host "ðŸŽ¯ PROJET NFT MARKETPLACE PRÃŠT POUR LE DÃ‰VELOPPEMENT" -ForegroundColor Green
>>     Write-Host "="*70 -ForegroundColor Green
>>
>>     Write-Host "`nðŸš€ Commandes disponibles :" -ForegroundColor White
>>     Write-Host "  npx hardhat compile             # Compiler" -ForegroundColor Gray
>>     Write-Host "  npx hardhat test                # Tester" -ForegroundColor Gray
>>     Write-Host "  npx hardhat node                # NÅ“ud local" -ForegroundColor Gray
>>     Write-Host "  npx hardhat run scripts/deploy.js --network localhost" -ForegroundColor Gray
>>
>>     Write-Host "`nðŸ“ Pour ajouter Sepolia plus tard :" -ForegroundColor Cyan
>>     Write-Host "1. Installez: npm install @nomicfoundation/hardhat-verify@next --legacy-peer-deps" -ForegroundColor Gray
>>     Write-Host "2. Configurez .env avec ALCHEMY_API_KEY et PRIVATE_KEY" -ForegroundColor Gray
>>     Write-Host "3. Ajoutez la config sepolia Ã  hardhat.config.js" -ForegroundColor Gray
>>
>> } else {
>>     Write-Host "`nâŒ Diagnostic des erreurs..." -ForegroundColor Red
>>
>>     # VÃ©rifier le contrat
>>     Write-Host "`nðŸ” VÃ©rification du contrat..." -ForegroundColor Yellow
>>     if (Test-Path "contracts\SimpleNFT.sol") {
>>         # Compiler avec plus de dÃ©tails
>>         npx hardhat compile --verbose
>>     } else {
>>         Write-Host "Contrat SimpleNFT.sol non trouvÃ©" -ForegroundColor Red
>>     }
>> }
ðŸš€ CORRECTION FINALE DU PROJET
=================================

1. ðŸ” VÃ©rification Node.js...
v22.10.0

2. ðŸ§¹ Nettoyage...

3. âš™ï¸  Configuration optimale...

4. ðŸ“¦ Installation...

added 71 packages, and audited 72 packages in 4s

20 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

5. ðŸ”§ Configuration Hardhat...

6. ðŸ§ª TEST FINAL...

Warning: This declaration shadows an existing declaration.
  --> .\contracts\SimpleNFT.sol:30:35:
   |
30 |     function safeMint(address to, string memory tokenURI)
   |                                   ^^^^^^^^^^^^^^^^^^^^^^
Note: The shadowed declaration is here:
   --> .\contracts\SimpleNFT.sol:107:5:
    |
107 |     function tokenURI(uint256 tokenId)
    |     ^ (Relevant source part starts here and spans across multiple lines).

Warning: This declaration shadows an existing declaration.
  --> .\contracts\SimpleNFT.sol:52:36:
   |
52 |     function ownerMint(address to, string memory tokenURI)
   |                                    ^^^^^^^^^^^^^^^^^^^^^^
Note: The shadowed declaration is here:
   --> .\contracts\SimpleNFT.sol:107:5:
    |
107 |     function tokenURI(uint256 tokenId)
    |     ^ (Relevant source part starts here and spans across multiple lines).

TypeError: Wrong argument count for modifier invocation: 1 arguments given but expected 0.
  --> .\contracts\SimpleNFT.sol:26:28:
   |
26 |     ) ERC721(name, symbol) Ownable(msg.sender) {
   |                            ^^^^^^^^^^^^^^^^^^^

Error HHE910: Compilation failed

For more info go to https://hardhat.org/HHE910 or run Hardhat with --show-stack-traces

âŒ Diagnostic des erreurs...

ðŸ” VÃ©rification du contrat...
Error HHE504: Invalid option "--verbose". It is neither a valid global option nor associated with any task. Did you forget to add the task first, or did you misspell it?

For more info go to https://hardhat.org/HHE504 or run Hardhat with --show-stack-traces
(venv) PS D:\Web3Projects\devPipline>