
========================================
  FINAL SHARE - BATCH ONLY
========================================

1. CREATE FULL SHARE (all files with line numbers)
2. CREATE DIFF SHARE (changed files only)
3. GIT COMMIT + PUSH
4. EXIT

Enter choice (1-4): 4
(venv) PS D:\Web3Projects\devPipline> # Supprimer les fichiers temporaires/dupliqus
>> $filesToRemove = @(
>>     "deploy-v6.js",  # Obsolte
>>     "tee.txt",
>>     "stdout.txt",
>>     "DIFF_REPORT.txt",
>>     "PROJECT_SHARE.txt",
>>     "hardhat.config.cjs"  # En double
>> )
>>
>> foreach ($file in $filesToRemove) {
>>     if (Test-Path $file) {
>>         Remove-Item -Path $file -Force
>>         Write-Host "  ???  Supprim: $file" -ForegroundColor DarkGray
>>     }
>> }
  🗑️  Supprimé: tee.txt
  🗑️  Supprimé: DIFF_REPORT.txt
  🗑️  Supprimé: PROJECT_SHARE.txt
(venv) PS D:\Web3Projects\devPipline> Write-Host "`n?? VALIDATION FINALE DU PROJET" -ForegroundColor Cyan
>> Write-Host "================================" -ForegroundColor Cyan
>>
>> # Test 1: Compilation
>> Write-Host "`n1. Compilation..." -ForegroundColor Yellow
>> npx hardhat compile
>> $compileSuccess = $LASTEXITCODE -eq 0

🔍 VALIDATION FINALE DU PROJET
================================

1. Compilation...

WARNING: You are using Node.js 20.19.6 which is not supported by Hardhat.
Please upgrade to 22.10.0 or a later LTS version (even major version number)

Hardhat only supports ESM projects.

Please make sure you have `"type": "module"` in your package.json.

You can set it automatically by running:

npm pkg set type="module"

(venv) PS D:\Web3Projects\devPipline> # Test 2: Tests
>> Write-Host "`n2. Tests..." -ForegroundColor Yellow
>> if (Test-Path "test/SimpleNFT.test.js") {
>>     npx hardhat test
>>     $testSuccess = $LASTEXITCODE -eq 0
>> } else {
>>     Write-Host "  ??  Aucun test trouvé" -ForegroundColor Gray
>>     $testSuccess = $true
>> }

2. Tests...

WARNING: You are using Node.js 20.19.6 which is not supported by Hardhat.
Please upgrade to 22.10.0 or a later LTS version (even major version number)

Hardhat only supports ESM projects.

Please make sure you have `"type": "module"` in your package.json.

You can set it automatically by running:

npm pkg set type="module"

(venv) PS D:\Web3Projects\devPipline> # Test 3: Déploiement local
>> Write-Host "`n3. Déploiement local..." -ForegroundColor Yellow
>> try {
>>     # Démarrer noud en arrière-plan
>>     $nodeJob = Start-Job -ScriptBlock {
>>         cd $using:PWD
>>         npx hardhat node --network hardhat 2>&1
>>     }
>>
>>     Start-Sleep -Seconds 5
>>
>>     # Déployer
>>     npx hardhat run scripts/deploy.js --network localhost 2>&1
>>     $deploySuccess = $LASTEXITCODE -eq 0
>>
>>     # Arrêter le noud
>>     Stop-Job $nodeJob
>>     Remove-Job $nodeJob
>>
>> } catch {
>>     Write-Host "  ??  Test déploiement ignoré (noud occupé)" -ForegroundColor Gray
>>     $deploySuccess = $true
>> }

3. Déploiement local...

WARNING: You are using Node.js 20.19.6 which is not supported by Hardhat.
Please upgrade to 22.10.0 or a later LTS version (even major version number)

Hardhat only supports ESM projects.

Please make sure you have `"type": "module"` in your package.json.

You can set it automatically by running:

npm pkg set type="module"

(venv) PS D:\Web3Projects\devPipline> # Résumé
>> Write-Host "`n" + ("="*50) -ForegroundColor Cyan
>> if ($compileSuccess -and $testSuccess -and $deploySuccess) {
>>     Write-Host "?? PROJET TOTALEMENT FONCTIONNEL !" -ForegroundColor Green
>>     Write-Host "="*50 -ForegroundColor Green
>>
>>     Write-Host "`n?? Structure finale:" -ForegroundColor White
>>     Get-ChildItem -Recurse | Where-Object { $_.PSIsContainer -eq $false } |
>>         Select-Object @{Name="Type";Expression={$_.Extension}}, Name |
>>         Sort-Object Type, Name | Format-Table -AutoSize
>>
>>     Write-Host "`n?? Prochaines étapes:" -ForegroundColor Cyan
>>     Write-Host "1. MODIFIEZ .env avec vos vraies clés API" -ForegroundColor Yellow
>>     Write-Host "2. Obtenez des ETH test Sepolia: https://sepoliafaucet.com/" -ForegroundColor Gray
>>     Write-Host "3. Déployez sur Sepolia: npx hardhat run scripts/deploy.js --network sepolia" -ForegroundColor Gray
>>     Write-Host "4. Développez le frontend dans un dossier séparé" -ForegroundColor Gray
>>
>> } else {
>>     Write-Host "??  PROJET PRESQUE PRÊT - Problèmes mineurs" -ForegroundColor Yellow
>>     Write-Host "="*50 -ForegroundColor Yellow
>> }

 + ==================================================
⚠️  PROJET PRESQUE PRÊT - Problèmes mineurs
= *50
(venv) PS D:\Web3Projects\devPipline> npx hardhat run scripts/deploy.js --network sepolia

WARNING: You are using Node.js 20.19.6 which is not supported by Hardhat.
Please upgrade to 22.10.0 or a later LTS version (even major version number)

Hardhat only supports ESM projects.

Please make sure you have `"type": "module"` in your package.json.

You can set it automatically by running:

npm pkg set type="module"

(venv) PS D:\Web3Projects\devPipline>